services:
  identity-api:
    build:
      context: C:\MYP\microServiceStarter\MicroServiceStarter\src
      dockerfile: Services/Identity/Identity.API/Dockerfile
    depends_on:
      sqldata:
        condition: service_started
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_URLS: http://0.0.0.0:80
      ApplicationInsights__InstrumentationKey: ''
      ConnectionString: Server=sqldata;Database=microServiceStarter.Service.IdentityDb;User
        Id=sa;Password=Pass@word
      MvcClient: http://host.docker.internal:6100
      OrchestratorType: ''
      UseCustomizationData: "True"
    image: msstr/msstridentity.api:linux-latest
    ports:
    - published: 6105
      target: 80
  sqldata:
    environment:
      ACCEPT_EULA: "Y"
      SA_PASSWORD: Pass@word
    image: mcr.microsoft.com/mssql/server:2019-latest
    ports:
    - published: 6433
      target: 1433
    volumes:
    - msstr-sqldata:/var/opt/mssql:rw
  webmvc:
    build:
      context: C:\MYP\microServiceStarter\MicroServiceStarter\src
      dockerfile: Web/WebMVC/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_URLS: http://0.0.0.0:80
      ApplicationInsights__InstrumentationKey: ''
      IdentityUrl: http://host.docker.internal:6105
      IdentityUrlHC: http://identity-api/hc
      OrchestratorType: ''
      UseCustomizationData: "True"
    image: msstr/msstrwebmvc:linux-latest
    ports:
    - published: 6100
      target: 80
version: '3.4'
volumes:
  msstr-sqldata:
    external: false